<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
        crossorigin="anonymous">
</head>

<body>


    <div class="container">
        <div class="text-center bg-warning"> E ticaret sitesine Hoşgeldiniz</div>
        <div class="card">

            <div class="card-body" id="satilacakurun"></div>
        </div>
        <div>
            <h3>Toplam Tutar</h3>
            <h4 id="idtoplamtutar"></h4>
        </div>
        <div>
            <h3>Alınan Adet</h3>
            <h4 id="idalinanadet"></h4>
        </div>
    </div>
    <script>



        const urunobjesi = {
            "isim": "Pala Gözlük (Sadece Ölüler Görür)",
            "fiyat": 100,
            "adet": 50,
            "url": "image/imggozluk.jpg",
        }
        var kalanurunadedi = urunobjesi.adet
        const divelementi = document.getElementById("satilacakurun")
        const alinanadetelementi = document.getElementById("idalinanadet")
        //kullanıcının inputa önceden girdiği adedi localstorage'dan alıyoruz
        alinanadetelementi.innerText = window.localStorage.getItem("alinanadet")
        kalanurunadedi = urunobjesi.adet - window.localStorage.getItem("alinanadet")
        const urunbilgisi = `
        <img src="${urunobjesi.url}"  class="img-fluid" alt="...">
        <h5>${urunobjesi.isim}</h5>
        <pFiyat: ${urunobjesi.fiyat}</p>
        <p>
            Kalan Ürün Adedi:  
            <span id="idkalanurunadedi">
            ${kalanurunadedi}  
            </span>
        </p>
        <label for="">
        <input type="number" value="1" id="adet" max="${urunobjesi.adet}">
    </label>
    <button onclick="sepeteekle()" class="btn btn-primary">
        sepete ekle
    </button> 
    `

        function sepeteekle() {
            //console.log(urunobjesi);
            const adetinputelementi = document.getElementById("adet")
            //input kutucuğuna kullanıcının girdiği değeri(value) adetvalue değişkenine assign(tayin) ediyoruz
            const adetvalue = adetinputelementi.value
            //debugger;
            //console.log()
            const toptutarelementi = document.getElementById("idtoplamtutar")
            let alinanAdetLocalStorage = window.localStorage.getItem("alinanadet")

            if (alinanAdetLocalStorage) {
                console.log("alinanadet:", alinanAdetLocalStorage)
                alinanAdetLocalStorage = parseInt(alinanAdetLocalStorage) + parseInt(adetvalue)

            }
            else {
                alinanAdetLocalStorage = adetvalue
            }
            toptutarelementi.innerText = alinanAdetLocalStorage * urunobjesi.fiyat
            //kullanıcı art arda sepete ekleme yapmışsa güncel alınan adet değerini localstorege'a kaydediyoruz
            window.localStorage.setItem("alinanadet", alinanAdetLocalStorage)
            //window.localStorage.setItem("isim", "abdullah")
            //window.localStorage.setItem("yas", "30")
            //güncel adet değerini localstorage'dan alıyoruz
            kalanurunadedi = urunobjesi.adet - window.localStorage.getItem("alinanadet")
            alinanadetelementi.innerText = window.localStorage.getItem("alinanadet")
            const kalanurunadedielementi = document.getElementById("idkalanurunadedi")
            kalanurunadedielementi.innerText = kalanurunadedi
        }


        divelementi.innerHTML = urunbilgisi





    </script>
</body>

</html>